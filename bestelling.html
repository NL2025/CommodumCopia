<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Bestelling - Commodum Copia</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <h1 class="groene-titel">Bevestig je Bestelling</h1>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="categorieen.html">CategorieÃ«n</a></li>
                <li><a href="producten.html">Producten</a></li>
                <li><a href="bestelling.html">Bestelling</a></li>
                <li><a href="login.html">Inloggen</a></li>
                <li><a href="winkelwagen.html" id="winkelwagen-icon">ðŸ›’ <span id="cart-count">0</span></a></li>
            </ul>
        </nav>
    </header>
    <main>
        <section id="bestelling-overzicht">
            <h2>Jouw Winkelwagen</h2>
            <ul id="bestelling-lijst"></ul>
            <p><strong>Totaalbedrag: â‚¬ <span id="totaal-bedrag">0.00</span></strong></p>
            <button onclick="bestellingPlaatsen()">Plaats Bestelling</button>
        </section>
    </main>
    <footer>
        <p>&copy; 2025 Commodum Copia</p>
    </footer>
    <script>
        function bijwerkenTotaal() {
            const cart = JSON.parse(localStorage.getItem("cart")) || [];
            fetch("data/products.json")
                .then(res => res.json())
                .then(products => {
                    let totaal = 0;
                    const lijst = document.getElementById("bestelling-lijst");
                    lijst.innerHTML = "";
                    cart.forEach(item => {
                        const product = products.find(p => p.product_id === item.id);
                        if (product) {
                            const prijs = product.prijs * item.aantal;
                            totaal += prijs;
                            lijst.innerHTML += `<li>${item.aantal}x ${product.naam} - â‚¬ ${prijs.toFixed(2)}</li>`;
                        }
                    });
                    document.getElementById("totaal-bedrag").textContent = totaal.toFixed(2);
                    document.getElementById("cart-count").textContent = cart.reduce((s, i) => s + i.aantal, 0);
                });
        }

        function bestellingPlaatsen() {
            alert("Bedankt voor je bestelling!");
            localStorage.removeItem("cart");
            location.reload();
        }

        bijwerkenTotaal();
    </script>
</body>
</html>
