<!-- Bestand: winkelwagen.html -->
<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Winkelwagen - Commodum Copia</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <h1 class="groene-titel">Winkelwagen</h1>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="categorieen.html">Categorieën</a></li>
                <li><a href="producten.html">Producten</a></li>
                <li><a href="winkelwagen.html">Winkelwagen</a></li>
                <li><a href="bestelling.html">Bestelling</a></li>
                <li><a href="login.html">Inloggen</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <section id="winkelwagen-inhoud">
            <!-- Winkelwagenitems worden hier geladen -->
        </section>
        <section id="winkelwagen-totaal">
            <p><strong>Totaal: € <span id="totaalbedrag">0.00</span></strong></p>
            <a href="bestelling.html"><button>Bevestig bestelling</button></a>
        </section>
    </main>
    <footer>
        <p>&copy; 2025 Commodum Copia</p>
    </footer>
    <script>
        const productData = {};
        fetch('data/products.json')
            .then(response => response.json())
            .then(data => {
                data.forEach(p => productData[p.product_id] = p);
                toonWinkelwagen();
            });

        function toonWinkelwagen() {
            const inhoud = document.getElementById('winkelwagen-inhoud');
            const totaalEl = document.getElementById('totaalbedrag');
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            let totaal = 0;

            inhoud.innerHTML = '';

            cart.forEach(item => {
                const product = productData[item.id];
                const prijs = parseFloat(product.prijs) * item.aantal;
                totaal += prijs;

                const div = document.createElement('div');
                div.classList.add('product');
                div.innerHTML = `
                    <h3>${product.naam}</h3>
                    <p>Aantal: <input type="number" min="1" value="${item.aantal}" onchange="updateAantal(${item.id}, this.value)"></p>
                    <p>Prijs: € ${prijs.toFixed(2)}</p>
                    <button onclick="verwijderUitWinkelwagen(${item.id})">Verwijder</button>
                `;
                inhoud.appendChild(div);
            });

            totaalEl.textContent = totaal.toFixed(2);
        }

        function updateAantal(id, nieuwAantal) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            const index = cart.findIndex(item => item.id === id);
            if (index !== -1) {
                cart[index].aantal = parseInt(nieuwAantal);
                localStorage.setItem('cart', JSON.stringify(cart));
                toonWinkelwagen();
            }
        }

        function verwijderUitWinkelwagen(id) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            cart = cart.filter(item => item.id !== id);
            localStorage.setItem('cart', JSON.stringify(cart));
            toonWinkelwagen();
        }
    </script>
</body>
</html>
